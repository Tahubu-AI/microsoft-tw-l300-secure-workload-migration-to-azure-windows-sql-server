# Lab Deployment Scripts

This folder contains the setup deployment scripts for creating the required Azure Resources for this lab.

Select the appropriate "Deploy" button below to provision the simulated on-premises Tailspin Toys resources for the lab into your Azure Subscription:

[![Deploy To Azure](../../images/deploytoazure.svg)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FTahubu-AI%2Fmicrosoft-tw-l300-secure-workload-migration-to-azure-windows-sql-server%2Fmain%2FHands-on%2520lab%2Fresources%2Fdeployment%2Fdeploy.json)
[![Deploy To Azure US Gov](../../images/deploytoazuregov.svg)](https://portal.azure.us/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FTahubu-AI%2Fmicrosoft-tw-l300-secure-workload-migration-to-azure-windows-sql-server%2Fmain%2FHands-on%2520lab%2Fresources%2Fdeployment%2Fdeploy.json)

The ARM template will deploy the following resources:

- Azure Virtual Networks with VNet Peering
  - Hub and spoke network in Azure
  - Simulated on-premises network in Azure
- Simulated on-premises environment
  - Azure Virtual Machine with Hyper-V hosting two VMs:
    - a simulated on-premises Windows server machine
    - a simulated on-premises SQL Server machine
- Azure Bastion to enable secure Remote Desktop connections to Virtual Machines
- Azure SQL Managed Instance
- Azure Storage Account for SQL Managed Instance backups

## Notes

- This folder contains both an ARM Template (`deploy.json`) file and Azure Bicep (`deploy.bicep`) file for automating the deployment of the required lab resources.
- The ARM template was generated by authoring the Azure Bicep script (`deploy.bicep`) first, and then using the Azure Bicep CLI `./bicep build` command to create the matching ARM Template.
