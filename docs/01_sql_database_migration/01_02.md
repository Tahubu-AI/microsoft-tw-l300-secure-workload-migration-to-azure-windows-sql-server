---
title: '2. Implement MI-Link for hybrid replication and failover'
layout: default
nav_order: 2
parent: 'Exercise 01: SQL Migration to Azure via Arc MI-Link'
---

# Task 02 - Implement MI-Link for hybrid replication and failover

## Introduction

With Tailspin's SQL Server now Arc‑enabled, the next step is to establish connectivity between the on‑premises environment and Azure SQL Managed Instance. This task focuses on configuring Azure Arc MI‑Link, which provides hybrid replication and failover capabilities. By setting up MI‑Link, Tailspin can begin synchronizing data securely and prepare for seamless migration without disrupting mission‑critical workloads.

## Description

In this task, you will:

1. Run an assessment on the Arc‑enabled SQL Server to validate readiness for MI‑Link.
2. Enable MI‑Link replication to establish synchronization between the on‑premises SQL Server and Azure SQL Managed Instance.
3. Perform an initial failover test to Azure SQL Managed Instance, confirming that workloads can be redirected successfully.

## Success Criteria

- Assessment completes successfully and confirms readiness for MI‑Link.
- MI‑Link replication is enabled and data begins synchronizing between on‑premises SQL Server and Azure SQL Managed Instance.
- A planned failover to Azure SQL Managed Instance is executed and validated.

## Solution



1. Navigate to the [Azure portal](https://portal.azure.com/), enter "azure arc" into the search bar, and select **Azure Arc** under **Services** in the results.

    ![The text "azure arc" is entered in the search box, and Azure Arc is highlighted under Services in the results.](../../Hands-on%20lab/images/azure-search-azure-arc.png)

2. On the Azure Arc blade, select **SQL servers** under **Data services** in the left menu, then select the **TailspinSql** server from the list of SQL Server instances.

    ![SQL servers is highlighted under Data services in the left menu of the Arc blade, and TailspinSql is highlighted in the server instances list.](../../Hands-on%20lab/images/azure-arc-sql-server-instances-tailspinsql.png)

3. On the TailspinSql page, expand **Migration** in the left menu, select **Assessments**, then select **Run assessment** on the Assessments page.

    ![Assessments is selected and highlighted in the left menu and the Run assessment button is highlighted on the toolbar.](../../Hands-on%20lab/images/azure-arc-sql-server-migration-assessments-run.png)

    {: .important}
    > If you recieve an error that the request to run the assessment has failed, you may need to wait a few minutes and try again. This can happen when the discovery process has not yet fully completed.

    {: .note}
    > Assessments are automatically run on all Arc-enabled SQL Servers. However, you will need to manually run the assessment since the SQL Server was just added and the scheduled assessment has not run yet.

4. Since you have a few minutes before the assessment is available, select **Database migration** in the left menu to review the migration steps. This unified dashboard provides end to end view of the migration journey of your SQL Server Instance by providing access to all capabilities like Assessments, Target creation, Data migration and Cutover.

5. Before starting the migration, review the **Azure SQL Benefits** tab, where you will see key advantages such as built-in monitoring, automatic performance tuning, extended security updates, and high availability. This helps you understand the value proposition of migrating to Azure SQL.

6. On the **Database migration** blade, select **Start migration** to launch Copilot and generate an overview of the SQL Server migration process. This includes high-level steps for completing a migration.

    ![The Database migration menu item is selected and highlighted. Start migration is highlighted, along with Copilot's generated summary of the migration process.](../../Hands-on%20lab/images/azure-arc-sql-migration-copilot-overview.png)

    {: .note}
    > The Copilot chat capability within the Arc migration experience provides guided step by step instructions of the migration journey. It can also answer questions about next steps and help troubleshoot issues.

7. When ready, close the Copilot panel by selecting the `X` in the upper right corner.

8. The tiles within the Database migration blade highlight the steps required for beginning the migration journey. Step 1 is **Assess source instance**, which you already stated by running an assessment. Select **View report**, which will take you back to your assessment.

    ![The View report button is highlighted within the Assess source instance tile.](../../Hands-on%20lab/images/azure-arc-sql-migration-view-report.png)

9. If your assessment is not ready, select **Refresh** on the toolbar to periodically until it is available.

    ![The Refresh button is highlighted on the Assessments toolbar.](../../Hands-on%20lab/images/azure-arc-sql-migration-assessment-running.png)

10. Take some time to review the assessment, selecting each tab (**Overview**, **Source properties**, **User databases**, and **Connection summary**) to gain an understanding of the information available and the proposed migration strategy and recommended target.

    ![The Assessment overview is displayed with the four tabs of the assessment report highlighted.](../../Hands-on%20lab/images/azure-arc-sql-migration-assessment-overview.png)

11. When ready, scroll down on the **Overview** tab and select **View assessment details** at the bottom of the Azure SQL MI panel. This view provides details on the blockers and warnings for each finding and recommendations on the remedial actions to resolve those blockers.  

    ![The View assessment details link at the bottom of the Azure SQL MI panel is highlighted.](../../Hands-on%20lab/images/azure-arc-sql-migration-assessment-details-link.png)

12. On the **Assessment results for TailspinSql** page, ensure **Azure SQL MI** is selected for the **Migration target type**, then review the assessment overview, evaluating the database migration readiness and compatability details in the tiles.

    ![The compatibilitity results are displayed for Azure SQL MI.](../../Hands-on%20lab/images/azure-arc-sql-migration-assessment-results-compatability.png)

13. Select the **SKU Recommendation** tab and review the recommendation reason, monthly cost estimate, and SKU recommendation.

    ![The SKU Recommendation tab is selected and highlighted.](../../Hands-on%20lab/images/azure-arc-sql-migration-assessment-results-sku-recommendations.png)

14. Return to your assessment and select **Create or select a target** within the **Azure SQL MI** tile.

    ![The Create or select a target button within the Azure SQL MI tile is highlighted.](../../Hands-on%20lab/images/azure-arc-sql-migration-select-sql-mi.png)

15. On the **Create or select target** blade:

    - Select **Yes, I have already created a tartet**
    - Choose **Azure SQL Managed Instance** as the **Target type**
    - Select the **Managed instance** that was created by the ARM template deployment
    - Select **Select target**

    ![On the Create or select target blade, Yes, I have already created a target, Azure SQL Managed Instance, and the Managed Instance are highlighted. The select target button is also highlighted.](../../Hands-on%20lab/images/azure-arc-sql-migration-select-target.png)

16. You should be returned to the **Database migration** page, where Steps 1 and 2 of the migration process are marked as complete, as indicated by green checkmarks on those tasks. Select **Migrate data** in Step 3 to start the data migration process.

    ![The completed tasks are highlighted, and the Migrate data button is highlighted under Step 3.](../../Hands-on%20lab/images/azure-arc-sql-migration-migrate-data.png)

17. On the **New data migration** page, select **Migrate using real-time replication - MI Link**, then select **Select**.

    ![Migrate using real-time MI-Link is selected and highlighted, and the Select button is highlighted.](../../Hands-on%20lab/images/azure-arc-sql-migration-data-migration-mi-link.png)

18. On the **Select source databases** tab, review the migration readiness of the databases on the TailspinSql server. Select the **Not ready** status next to the _Customer360_ database and review the readiness issues.

    ![The Not ready status is highlighted next to the Customer306 database and the issues are highlighted in the Readiness Issues dialog.](../../Hands-on%20lab/images/azure-arc-sql-migration-data-migration-not-ready-error.png)

    {: .note}
    > For this lab, you will only be migrating the _ToyStore_ database, so you do not need to fix the issues with the _Customer360_ database, but this demonstrates how Azure Arc can help guide you to ensure successful migrations.

19. Select **OK** to close the **Readiness Issues** dialog.

20. Select the _ToyStore_ database by checking the box in front of it, then select **Next: Settings**.

    ![On the Select source databases tab of the new data migration blade, ToyStore is checked and the Next button is highlighted.](../../Hands-on%20lab/images/azure-arc-new-data-migration-select-source-databases.png)

21. On the **Settings** tab, accept the default **MI link** and **Source availability group** names, verify automatic IP address detection is enabled, then select **Test connection**.

    ![On the Setttings tab, the default values are entered adn the Test connection button is highlighted.](../../Hands-on%20lab/images/azure-arc-new-data-migration-settings.png)

22. Ensure your network connection validation succeeds, then select **Next: Review + Create**.

    ![The network connection test succeeded message is highlighted under the Test connection button, and the Next button is highlighted.](../../Hands-on%20lab/images/azure-arc-new-data-migration-settings-test-connection-success.png)

23. On the **Review + Create** tab, review the data migration, you may see a **SQL Server configuration** status of _Ready with warnings_. Select the link to view the warnings. Otherwise, proceed to starting the migration.

    ![The Ready with warnings link is highlighted next to SQL Server configuration and the validation issues dialog is displayed.](../../Hands-on%20lab/images/azure-arc-new-data-migration-sql-server-configuration-warnings.png)

    {: .note}
    > The warnings about the database endpoint mirroring are a bug and can be safely ignored.

24. Select **OK** to close the **Validation Issues** dialog.

25. Select **Start data migration**.

    ![The Start data migration button is highlighted on the review + create tab.](../../Hands-on%20lab/images/azure-arc-new-data-migration-start-data-migration.png)

26. You should be returned to the **TailspinSql** page. Select **Monitor and cutover** under **Migration** in the left menu. It can take several minutes for the migration to appear, so select **Refresh** every few minutes until it shows up in the list.

    ![The Monitor and cutover item in the left menu is selected and highlighted. The Refresh button on the toolbar is highlighted.](../../Hands-on%20lab/images/azure-arc-new-data-migration-monitor-refresh.png)

    {: .note}
    > If you had the _Ready with warnings_ status on your **SQL Server configuration**, you might be redirected back to the Azure portal home page. Navigate back to the Azure Azc SQL Servers page and select the **TailspinSql** server, and then complete the step above.

27. If the **Migration status** shows as **Stalled**, you can select the notifications icon on the Azure portal top bar and monitor the progress of the migration deployment. It may show a status of **Stalled** until the deployment has finished.

    ![The stalled migration status is highlighted. The Azure notification icon is highlighted in the top bar, and the deployment in progress message is displayed.](../../Hands-on%20lab/images/azure-arc-new-data-migration-status-stalled.png)

28. TODO...

<details markdown="block">
<summary>Expand this section to view the solution</summary>

TODO: Move this back up to wrap the solution content.

</details>
