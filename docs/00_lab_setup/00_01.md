---
title: '1. Validate resource providers'
layout: default
nav_order: 1
parent: 'Exercise 00: Lab Setup'
---

# Task 01 - Validate resource providers

## Description

To complete this lab, certain resource providers must be registered in your Azure subscription to allow for the deployment and management of the required resources. In this task, you will run Azure CLI commands to ensure that the required resource providers are registered in your subscription.

## Success Criteria

- You have used the Azure CLI to validate and register the required resource providers.

## Solution

<details markdown="block">
<summary>Expand this section to view the solution</summary>

1. Open a browser and sign in to the [Azure Portal](https://portal.azure.com/).

    {: .highlight }
    > If you're using Azure Gov, sign in to the [Azure Gov Portal](https://portal.azure.us/).

2. In the top bar of the Azure Portal, select the **Cloud Shell** icon.

    ![The Azure Cloud Shell icon is highlighted on the top bar in the Azure portal.](../../Hands-on%20lab/images/azure-cloud-shell-icon.png)

3. If prompted, select **Bash** as the shell type.

4. In the Cloud Shell **Getting started** dialog, if prompted, select **No storage account required**, choose the **Subscription** to use, and then select **Apply**.

5. At the **Cloud Shell** prompt, run the following Azure CLI command to retrieve the registration status of the resource providers required for this lab.

    ```bash
    az provider list --query "[?namespace == 'Microsoft.Compute' || namespace=='Microsoft.DataMigration' || namespace=='Microsoft.Network' || namespace == 'Microsoft.Sql' || namespace=='Microsoft.Storage'].{Namespace: namespace, RegistrationState: registrationState}" -o table
    ```

    {: .highlight }
    > Example output:
    >
    > ```bash
    > Namespace                RegistrationState
    > -----------------------  -------------------
    > Microsoft.Compute        Registered
    > Microsoft.Sql            Registered
    > Microsoft.Network        Registered
    > Microsoft.Storage        Registered
    > Microsoft.DataMigration  NotRegistered
    > ```

6. Take note of any **Namespace** values that have a **RegistrationState** of `NotRegistered`.

7. For each of the resource providers with a registration state of `NotRegistered`, execute the following Azure CLI command, replacing `PROVIDER` with the **Namespace** that needs to be registered in your subscription. This will register the specified resource provider.

    ```bash
    az provider register --namespace 'PROVIDER' --wait
    ```

    {: .highlight }
    > Example command to register the `Microsoft.DataMigration` provider:
    >
    > ```bash
    > az provider register --namespace 'Microsoft.DataMigration' --wait
    > ```

</details>
