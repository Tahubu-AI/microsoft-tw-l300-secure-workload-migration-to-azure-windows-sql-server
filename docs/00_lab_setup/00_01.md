---
title: '1. Validate resource providers'
layout: default
nav_order: 1
parent: 'Exercise 00: Lab Setup'
---

# Task 01 - Validate resource providers

## Introduction

Before Tailspin Toys can begin migrating workloads from their on‑premises datacenter into Azure, they need to make sure Azure knows which services they plan to use. Resource providers act like "gateways" that enable specific Azure services and features. By registering them up front, Tailspin Toys ensures that the right building blocks are available for both cloud‑native resources and hybrid services managed through Azure Arc.

## Description

In Azure, resource providers must be registered in your subscription to allow for the deployment and management of resources. Resource providers are the services in Azure that supply and manage specific resource types, such as `Microsoft.Compute` for virtual machines or `Microsoft.Network` for networking. Registering them ensures that your subscription is authorized to use those services and that deployments can succeed without errors. You can think of resource providers like plug‑ins that unlock specific capabilities in Azure. If they are not registered, the platform cannot make those features available to you.

## Key Tasks

In this task, you will use the Azure CLI to confirm that the required resource providers are registered in your subscription.

1. Use the Azure CLI to check the registration status of the following required resource providers:
   - `Microsoft.AzureArcData`
   - `Microsoft.Compute`
   - `Microsoft.ContainerService`
   - `Microsoft.DataMigration`
   - `Microsoft.GuestConfiguration`
   - `Microsoft.HybridCompute`
   - `Microsoft.HybridConnectivity`
   - `Microsoft.Network`
   - `Microsoft.OperationsManagement`
   - `Microsoft.Sql`
   - `Microsoft.Storage`
2. Register any resource providers that are not already registered.
3. Monitor the registration status until all providers show as **Registered**.

## Success Criteria

- All required resource providers are registered.

## Solution

<details markdown="block">
<summary>Expand this section to view the solution</summary>

1. Open a browser and sign in to the [Azure Portal](https://portal.azure.com/).

    {: .highlight }
    > If you're using Azure Gov, sign in to the [Azure Gov Portal](https://portal.azure.us/).

2. In the top bar of the Azure Portal, select the **Cloud Shell** icon.

    ![The Azure Cloud Shell icon is highlighted on the top bar in the Azure portal.](../../Hands-on%20lab/images/azure-cloud-shell-icon.png)

3. If prompted, select **Bash** as the shell type.

4. In the Cloud Shell **Getting started** dialog, if prompted, select **No storage account required**, choose the **Subscription** to use, and then select **Apply**.

5. At the **Cloud Shell** prompt, run the following Azure CLI command to check the registration status of the required resource providers.

    ```bash
    az provider list --query "[?namespace == 'Microsoft.AzureArcData' || namespace=='Microsoft.Compute' || namespace=='Microsoft.ContainerService' || namespace=='Microsoft.DataMigration' || namespace=='Microsoft.GuestConfiguration' || namespace=='Microsoft.HybridCompute' || namespace=='Microsoft.HybridConnectivity' || namespace=='Microsoft.Network' || namespace=='Microsoft.OperationsManagement' || namespace == 'Microsoft.Sql' || namespace=='Microsoft.Storage'].{Namespace: namespace, RegistrationState: registrationState}" -o table
    ```

    {: .highlight }
    > Example output:
    >
    > ```bash
    > Namespace                       RegistrationState
    > ------------------------------  -------------------
    > Microsoft.Compute               Registered
    > Microsoft.Sql                   Registered
    > Microsoft.Network               Registered
    > Microsoft.Storage               Registered
    > Microsoft.GuestConfiguration    Registered
    > Microsoft.ContainerService      NotRegistered
    > Microsoft.DataMigration         NotRegistered
    > Microsoft.AzureArcData          NotRegistered
    > Microsoft.HybridCompute         NotRegistered
    > Microsoft.HybridConnectivity    NotRegistered
    > Microsoft.OperationsManagement  NotRegistered
    > ```

6. For each of the resource providers with a registration state of `NotRegistered`, run the following Azure CLI command, replacing `PROVIDER` with the **Namespace** that needs to be registered in your subscription.

    ```bash
    az provider register --namespace 'PROVIDER'
    ```

    {: .highlight }
    > Example command to register the `Microsoft.DataMigration` provider:
    >
    > ```bash
    > az provider register --namespace 'Microsoft.DataMigration'
    > ```
    >
    > You will see confirmation that the registration request has been submitted and that the registration is in progress, showing a message similar to `Registering is still on-going. You can monitor using 'az provider show -n Microsoft.DataMigration'`.

7. After registering the required resource providers, re-run the command from step 5 until all required resource providers show as `Registered`.

    {: .highlight }
    > Registration can take several minutes. Continue re‑running the command until all providers show as Registered.

8. Once all required resource providers are registered, you can close the Cloud Shell by selecting the **Close** icon in the top-right corner of the Cloud Shell pane. Closing Cloud Shell does not affect the registration process, as providers continue registering in the background.

</details>
